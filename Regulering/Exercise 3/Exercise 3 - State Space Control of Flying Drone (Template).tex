\documentclass[a4paper,10pt,oneside]{article}
\usepackage{geometry}
\geometry{a4paper, portrait, margin=1in}
\usepackage{amsmath,amsthm}
 \usepackage{amssymb}
\usepackage{dsfont}                         % Enables double stroke fonts
\usepackage{color}
\usepackage[draft,inline]{fixme}
\usepackage[english]{babel}
\usepackage{graphicx}
\usepackage{float}
\usepackage{tcolorbox}

\newif\ifincludeSolution

\includeSolutiontrue      % My version of the document
\includeSolutionfalse     % Student version of the document

\begin{document}
\title{Hand-In Exercise 3: State Space Control of Flying Drone}
\author{{\color{red}Name~1 (Username~1), Name~2 (Username~2), $\dots$}}
\date{}
\maketitle

\section{System Analysis}
\subsection{State Space Model}
{\color{red}Provide a derivation of a state space model of the system. Use Figure~\ref{fig:sketchQuadrotor} and \eqref{eqn:linearizedDroneModel}.}
\begin{figure}[ht]
\centering
  %\def\svgwidth{0.5\columnwidth}
\graphicspath{{figures/}}
\input{figures/sketchQuadrotor.pdf_tex}
\caption{Diagram of flying drone that is controlled via two propellers, which apply forces $F_1$ and $F_2$ to the drone.}
\label{fig:sketchQuadrotor}
\end{figure}
\begin{align}
\begin{split}
J\ddot{\theta}&=r(u_2-u_1)-b_1\dot{\theta}-b_2v\\
m\dot{v}&=u_1+u_2-b_3v
\end{split}\label{eqn:linearizedDroneModel}
\end{align}

\begin{tcolorbox}
{\color{red}Text}
\begin{align*}
\dot{x} &= \text{\color{red}Insert equation}\\
y &= \text{\color{red}Insert equation}
\end{align*}
where {\color{red}explain all parameters}
\end{tcolorbox}

\subsection{Observability and Controlability}
{\color{red}Determine controlability and observability of the system.}

\begin{tcolorbox}
{\color{red}Write the two matrices}
\begin{align*}
\mathcal{O} &= \text{\color{red}Insert equation}\\
\mathcal{C} &= \text{\color{red}Insert equation}
\end{align*}
{\color{red}provide conclusion on based on matrices}
\end{tcolorbox}
\section{Controller Design}
\subsection{Integral Control}
{\color{red}Design an integral control for the system using pole placement. The control should ensure that the system has a 5~\% settling time of 1~s.}
\begin{tcolorbox}
The following control law is an integral control that ensures a 5~\% settling time of 1~s
\begin{align*}
u &= \text{\color{red}Insert equation}
\end{align*}
\end{tcolorbox}
\subsection{Performance Evaluation}
{\color{red} Evaluate the performance of the system by changing the reference to the system from $(p,\theta)=(0,0)$ to $(p,\theta)=(1,\pi/8)$. You should plot both $u$, $y$, and the state $x$ in Figure~\ref{fig:performanceEvaluation}.}
\begin{figure}[H]
\centering
\text{{\color{red}Plot of $u$, $y$, and the state $x$}}
\caption{{\color{red}Insert caption}.}\label{fig:performanceEvaluation}
\end{figure}
\section{Observer Design}
\subsection{Pole Selection}
{\color{red} Determine appropriate locations for observer poles.}
\subsection{Observer Design}
{\color{red} Design a full-order observer for the system using pole placement.}
\section{Simulation}
{\color{red} Simulate the observer-based controller by changing the reference to the system from $(p,\theta)=(0,0)$ to $(p,\theta)=(1,\pi/8)$ and ensure that the initial condition of the system and the observer are different. You should plot both $u$, $y$, and the state $x$ in Figure~\ref{fig:simulation}.}
\begin{figure}[H]
\centering
\text{{\color{red}Plot of $u$, $y$, and the state $x$}}
\caption{{\color{red}Insert caption}.}\label{fig:simulation}
\end{figure}

% the drone angle is called $\theta$, a         & 1     & Nm/(rad/s)\\  Motor torque      & $v$      & -     & Nm

%\begin{table}[!htb]
%	\centering
%\begin{tabular}{lccc}
%  %\hline
%  % after \\: \hline or \cline{col1-col2} \cline{col3-col4} ...
%  Name              & Symbol        & Value & Unit      \\\hline
%  Inertia of drone  & $J$         & ?     & kgm${}^2$ \\
%  Radius of drone   & $r$         & ?     & kgm${}^2$ \\
%  Mass of drone     & $m$         & ?     & Nm/rad    \\
%  Drag coefficients & $b_1$         & ?  & Nm/(rad/s)\\
%  Motor damping     & $\theta$         & 1     & Nm/(rad/s)\\
%  Motor torque      & $v$      & -     & Nm        %\\
%%  Angle (motor side)& $\theta_m$    & -     & rad       \\
%%  Angle (link side) & $\theta_l$    & -     & rad       \\
% % \hline
%\end{tabular}
%\caption{Parameters and variables of flying drone model.}
%\label{tab:droneParam}
%\end{table}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}
